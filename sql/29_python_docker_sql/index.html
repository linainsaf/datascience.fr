
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://datascience_careerera.fr/sql/29_python_docker_sql/">
      
      
        <link rel="prev" href="../06_b_docker_install/">
      
      
        <link rel="next" href="../../docker/docker_network/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>SQLAlchemy and Docker - Data Science</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sqlalchemy-and-docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Data Science" class="md-header__button md-logo" aria-label="Data Science" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Science
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SQLAlchemy and Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Data Science" class="md-nav__button md-logo" aria-label="Data Science" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Data Science
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction à la Data Science
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
          Apprentissage automatique (a.k.a Machine Learning)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Apprentissage automatique (a.k.a Machine Learning)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Apprentissage automatique (a.k.a Machine Learning)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ml/" class="md-nav__link">
        Les taches et modéles de ML
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../eval/" class="md-nav__link">
        Evaluation des modéles de Classification et de Regression
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Le Deep Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Le Deep Learning" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Le Deep Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dl/" class="md-nav__link">
        Introduction au Deep Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dltypes/" class="md-nav__link">
        Les différents types de réseaux de neurones
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        API (Application Programmable Interface)
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" tabindex="0" aria-expanded="true">
          Docker for App Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docker for App Deployment" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Docker for App Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_install/" class="md-nav__link">
        Setting up Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_python_app/" class="md-nav__link">
        Building a Docker Image for Python App
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_commands/" class="md-nav__link">
        Docker CLI Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_volume/" class="md-nav__link">
        Docker Volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_b_docker_install/" class="md-nav__link">
        Install MySQL with docker
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SQLAlchemy and Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        SQLAlchemy and Docker
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-an-existing-sql-database-into-a-container" class="md-nav__link">
    Add an existing SQL database into a container
  </a>
  
    <nav class="md-nav" aria-label="Add an existing SQL database into a container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#write-a-dockerfile-with-initsql-file" class="md-nav__link">
    Write a Dockerfile with init.sql file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-our-mysql-container" class="md-nav__link">
    Run our MySQL container
  </a>
  
    <nav class="md-nav" aria-label="Run our MySQL container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-the-image" class="md-nav__link">
    Build the image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-container" class="md-nav__link">
    Start the container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-our-container" class="md-nav__link">
    Connect to our container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-a-docker-mysql-container-with-a-python-script" class="md-nav__link">
    Query a docker MySQL container with a python script
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_network/" class="md-nav__link">
        Docker Network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_compose/" class="md-nav__link">
        Docker-compose
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_https/" class="md-nav__link">
        Docker and HTTPS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker_best_practice/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" tabindex="0" aria-expanded="false">
          SQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_6_1" tabindex="0" aria-expanded="false">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Introduction" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_db_kesako/" class="md-nav__link">
        What is a Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_table/" class="md-nav__link">
        Tables & Keys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_basics/" class="md-nav__link">
        SQL Basic understanding
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      
      
        <label class="md-nav__link" for="__nav_6_2" tabindex="0" aria-expanded="false">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_MacOS_install/" class="md-nav__link">
        Install MySQL on MacOS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
        <label class="md-nav__link" for="__nav_6_3" tabindex="0" aria-expanded="false">
          CRUD (Create, Read, Update, Delete) operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CRUD (Create, Read, Update, Delete) operations" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          CRUD (Create, Read, Update, Delete) operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07_creating_tables/" class="md-nav__link">
        Creating tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08_insert/" class="md-nav__link">
        Inserting Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09_constraints/" class="md-nav__link">
        Constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10_update_delete/" class="md-nav__link">
        Update & Delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11_queries/" class="md-nav__link">
        Basic Queries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12_company_db_1/" class="md-nav__link">
        Build a company database from scratch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13_queries_db/" class="md-nav__link">
        More Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14_functions/" class="md-nav__link">
        SQL Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../15_Wildcards/" class="md-nav__link">
        Wildcards & Unions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../17_joins/" class="md-nav__link">
        Joins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../18_Nested_Queries/" class="md-nav__link">
        Nested Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../19_delete/" class="md-nav__link">
        On Delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../20_triggers/" class="md-nav__link">
        Triggers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../21_er_diagrams/" class="md-nav__link">
        ER DIagrams
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-an-existing-sql-database-into-a-container" class="md-nav__link">
    Add an existing SQL database into a container
  </a>
  
    <nav class="md-nav" aria-label="Add an existing SQL database into a container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#write-a-dockerfile-with-initsql-file" class="md-nav__link">
    Write a Dockerfile with init.sql file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-our-mysql-container" class="md-nav__link">
    Run our MySQL container
  </a>
  
    <nav class="md-nav" aria-label="Run our MySQL container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-the-image" class="md-nav__link">
    Build the image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-container" class="md-nav__link">
    Start the container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-our-container" class="md-nav__link">
    Connect to our container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-a-docker-mysql-container-with-a-python-script" class="md-nav__link">
    Query a docker MySQL container with a python script
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sqlalchemy-and-docker">SQLAlchemy and docker</h1>
<p>In this section we will be working with docker.  </p>
<p><strong>Do we actually need docker to our journey to SQLAlchemy ? No. The only reason we choose to use Docker, is because, it is fast to setup, secure and lightweight.</strong> </p>
<p>Docker provides platform which helps us deliver software packages in containers. The software package we need from docker is a database, postgres to be precise.</p>
<p>Installing docker is simple, see the installation section if you don't have it installed. For the next part, we will assume you've already installed docker. </p>
<h2 id="add-an-existing-sql-database-into-a-container">Add an existing SQL database into a container</h2>
<p>In this section we will be looking at an existing database and put it into a docker container in order to query this database with a python script. </p>
<p>Here's an example database let's call this script <code>init.sql</code>: </p>
<p>```sql title="init.sql"
CREATE DATABASE testdb;
USE testdb;</p>
<p>CREATE TABLE users (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  email VARCHAR(50) NOT NULL,
  PRIMARY KEY (id)
);</p>
<p>INSERT INTO users (name, email) VALUES
  ('John Doe', 'johndoe@example.com'),
  ('Jane Doe', 'janedoe@example.com'),
  ('Bob Smith', 'bobsmith@example.com');</p>
<p>GRANT ALL PRIVILEGES ON testdb.* TO 'user'@'%' IDENTIFIED BY 'user-password' WITH GRANT OPTION;
FLUSH PRIVILEGES;</p>
<pre><code>
This SQL script is used to create a new database called `testdb`, create a table called `users` with three columns `id`, `name`, and `email`, insert three records into the users table, and grant privileges to a user to access the testdb database.

### What is grant privileges 

The `GRANT ALL PRIVILEGES` command is used in MySQL to grant a user all possible privileges on a database or a specific table within a database. This command allows the user to perform any action on the specified database or table, including creating, modifying, and deleting data.

Here's a breakdown of the syntax of the `GRANT ALL PRIVILEGES` command:
```sql 
GRANT ALL PRIVILEGES ON database_name.* TO 'username'@'localhost' IDENTIFIED BY 'password';
FLUSH PRIVILEGES;
</code></pre>
<ul>
<li><code>GRANT ALL PRIVILEGES</code> : This command grants all possible privileges to the user.</li>
<li><code>ON database_name.*</code> : This specifies the database and any tables within it that the user will have privileges on. The * wildcard character specifies all tables within the database.</li>
<li><code>TO 'username'@'localhost'</code> : This specifies the username and the host from which the user can connect to the database.</li>
<li><code>IDENTIFIED BY 'password'</code> : This specifies the password for the user.</li>
<li><code>FLUSH PRIVILEGES</code> : This line reloads the grant tables in the mysql database to apply the changes made by the GRANT command.</li>
</ul>
<p>The <code>GRANT ALL PRIVILEGES</code> command is a powerful command that should be used with caution. It is recommended to only grant the necessary privileges to users to minimize the risk of data loss or security breaches.</p>
<p><strong>In our case this database is created in order to be connected by a python script and for that we must have a user, is it not recommended to connect the database as root user.</strong></p>
<h3 id="write-a-dockerfile-with-initsql-file">Write a Dockerfile with <code>init.sql</code> file</h3>
<p>Let's write a <code>Dockerfile</code> for our sql container : </p>
<pre><code class="language-Dockerfile">FROM mysql:5.6

# set root password
ENV MYSQL_ROOT_PASSWORD=my-secret-pw

# create database and table
COPY init.sql /docker-entrypoint-initdb.d/

# add a new user
ENV MYSQL_USER=user
ENV MYSQL_PASSWORD=user-password

EXPOSE 3306
</code></pre>
<p>As you know in a <code>Dockerfile</code>, the <code>COPY</code> command is used to copy files or directories from the host machine into the Docker container.</p>
<p>In the context of our <code>Dockerfile</code>, the line  </p>
<pre><code class="language-Dockerfile">COPY init.sql /docker-entrypoint-initdb.d/ 
</code></pre>
<p>copies the <code>init.sql</code> file from the host machine into the <code>/docker-entrypoint-initdb.d/</code> directory within the Docker container.</p>
<p><strong>The <code>/docker-entrypoint-initdb.d/</code> directory is a default directory that is used by the mysql Docker image to automatically execute any SQL scripts that are located in this directory when the container is started up.</strong></p>
<p>By copying the <code>init.sql</code> file into the <code>/docker-entrypoint-initdb.d/</code> directory within the Docker container, you are instructing the mysql image to automatically execute this script when the container starts up. This allows you to automatically create our database, tables, and insert data into the database without having to manually execute SQL commands every time the container is started up.</p>
<h3 id="run-our-mysql-container">Run our MySQL container</h3>
<p>To build our custom MySQL image, you can run the following command in the directory containing the Dockerfile and <code>init.sql</code> script:</p>
<h4 id="build-the-image">Build the image</h4>
<pre><code class="language-bash">docker build -t my-mysql-image .
</code></pre>
<p>This command will build the Docker image using the Dockerfile in the current directory and tag it as <code>my-mysql-image:latest</code>.</p>
<h4 id="start-the-container">Start the container</h4>
<p>Once the image is built, you can start a new container using the following command:</p>
<pre><code class="language-bash">docker run --name mysql-container -d -p 3306:3306 my-mysql-image
</code></pre>
<p>This command will start a new container (named <code>mysql-container</code>) using the custom MySQL image, now we can connect to our container in order to verify if all the options are passed. </p>
<h4 id="connect-to-our-container">Connect to our container</h4>
<p>Go to your terminal and run this command in order to enter into the container : </p>
<pre><code class="language-bash">docker exec -it mysql-container /bin/bash
</code></pre>
<p>or the equivalent comnmand : </p>
<pre><code class="language-bash">docker exec -it &lt;your-container-id&gt; /bin/bash
</code></pre>
<p>Now that you are in the container we can access the MySQL CLI with the following command : </p>
<pre><code class="language-bash">mysql -uuser -puser-password
</code></pre>
<p>You should see the following prompt </p>
<pre><code class="language-sql">mysql&gt;
</code></pre>
<p>It means that you're currently in the MySQL Shell of the container. You can now view our <code>testdb</code> and <code>users</code> table with the command : </p>
<pre><code class="language-sql">mysql&gt; show databases; 
</code></pre>
<p>you should see this output : </p>
<pre><code class="language-bash">+--------------------+
| Database           |
+--------------------+
| information_schema |
| testdb             |
+--------------------+
2 rows in set (0.00 sec)
</code></pre>
<p>It means our <code>user</code> is able to see our database, you can also do a test query in order to verify the integrity of our database. In this section we have seen how to build a custom MySQL container with a database in it and how to access this database with the docker CLI 🚀</p>
<h2 id="query-a-docker-mysql-container-with-a-python-script">Query a docker MySQL container with a python script</h2>
<p>Now, let's write a python script <code>connect_db.py</code> to connect our database 🥳</p>
<p>```python title="connect_db.py"
from sqlalchemy import create_engine, MetaData, Table</p>
<h1 id="create-engine-to-connect-to-mysql">create engine to connect to MySQL</h1>
<p>engine = create_engine('mysql://user:user-password@0.0.0.0:3306/testdb')</p>
<h1 id="create-metadata-object">create metadata object</h1>
<p>metadata = MetaData()</p>
<h1 id="reflect-the-users-table">reflect the users table</h1>
<p>users_table = Table('users', metadata, autoload=True, autoload_with=engine)</p>
<h1 id="select-all-rows-from-the-users-table">select all rows from the users table</h1>
<p>select_query = users_table.select()</p>
<h1 id="execute-the-query">execute the query</h1>
<p>with engine.connect() as conn:
    result = conn.execute(select_query)
    for row in result:
        print(row)</p>
<pre><code>
Let's break down the different parts of the script:

- `create_engine('mysql://root:my-secret-pw@0.0.0.0:3306/testdb')`: This creates a SQLAlchemy engine that connects to the MySQL database running in the Docker container. The username is &quot;root&quot;, the password is &quot;my-secret-pw&quot;, the host is &quot;localhost&quot;, the port is &quot;3306&quot;, and the database name is &quot;testdb&quot;.
- `metadata = MetaData()` : This creates a metadata object that will be used to reflect the database schema.
- `users_table = Table('users', metadata, autoload=True, autoload_with=engine)` : This reflects the &quot;users&quot; table from the database using the metadata object.
- `select_query = users_table.select()` : This creates a query that selects all rows from the &quot;users&quot; table.
- `with engine.connect() as conn` : result = conn.execute(select_query): This creates a connection to the database using the engine, executes the select query, and stores the result in a variable.
- `for row in result: print(row)` : This loops through the result set and prints each row.

This script assumes that you have the necessary dependencies installed, including SQLAlchemy and the MySQL driver for Python. You can install these dependencies using `pip`:
```bash
pip install sqlalchemy pymysql
</code></pre>
<p>Note that the driver used to connect to the MySQL database is "pymysql", which is a Python MySQL client library that works with SQLAlchemy.</p>
<p>If you execute this script, you should see this output : </p>
<pre><code class="language-bash">(1, 'John Doe', 'johndoe@example.com')
(2, 'Jane Doe', 'janedoe@example.com')
(3, 'Bob Smith', 'bobsmith@example.com')
</code></pre>
<h2 id="next-steps">Next steps</h2>
<p>In this section we covered a pretty simple database and python script so for the next steps if you want to upgrade this project you can consider : </p>
<ul>
<li>Add FastAPI CRUD endpoints to interact with the database </li>
<li>Add a better database and <code>init.sql</code> script </li>
<li>Wrap-up the project with a <code>docker-compose.yml</code> file </li>
<li>Code a dashboard route in FastAPI in order to visualize some data of your database </li>
<li>Be creative 😃</li>
</ul>
<h2 id="wrap-up">Wrap-up</h2>
<p>Let's summarize whant we have seen in this section :</p>
<ul>
<li>Docker provides a consistent and portable environment for running applications, including databases like MySQL.</li>
<li>We can use Docker to run a MySQL database in a container by pulling the mysql image and specifying the appropriate environment variables and port mappings.</li>
<li>We can use the mysql-connector-python library in Python to connect to a MySQL database and perform SQL queries.</li>
<li>We can create a SQL script to create tables and insert data into the MySQL database, and include this script in the Docker image to automatically execute it when the container starts up.</li>
<li>We have learned how to write a Dockerfile to define the configuration of a Docker container, and how to use it to build a Docker image.</li>
<li>Overall, connecting Docker MySQL and Python provides a more efficient and reliable way to manage and run databases and applications, and reduces the complexity and time involved in setting up and maintaining software installations.</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>